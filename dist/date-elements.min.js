/**
 * Copyright (c) 2015, Leo Di Donato <leodidonato@gmail.com>
 * ng-date-elements.js - AngularJS directives for date elements
 * @version 0.1.0
 * @link http://github.com/leodido/ng-date-elements
 * @license MIT
 */
(function(){function h(a,c,d){return a.call.apply(a.bind,arguments)}function k(a,c,d){if(!a)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,b);return a.apply(c,e)}}return function(){return a.apply(c,arguments)}}function l(a,c,d){l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf('native code')?h:k;return l.apply(null,arguments)}
function m(a,c){function d(){}d.prototype=c.prototype;a.p=c.prototype;a.prototype=new d;a.prototype.constructor=a;a.o=function(a,e,g){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return c.prototype[e].apply(a,d)}};var n=['MMMM','MMM','MM','M'],p=n[2];function q(a,c,d,b){var e=this;this.n=function(){a.element=a.element||{};a.element.opts=[];for(var b=e.d(),c=e.e();b<=c;b++)a.element.opts.push({index:b,label:e.a(b),value:e.b(b)})};this.m=function(a){return angular.isDefined(a)&&a.index>=this.d()&&a.index<=this.e()&&a.value===this.b(a.index)&&a.label===this.a(a.index)};this.f=function(c,e){var d={};d[c]=e;return b('filter')(a.element.opts,d,!0)};this.d=function(){return~~a.first};this.e=function(){return~~a.last}}
q.$inject=['$scope','$element','$attrs','$filter'];function r(){var a='',c='',d='';this.c=function(){return c};this.l=function(){return d};this.k=function(){return a};this.h=function(a){if(/[^a-zA-Z]/.test(a))throw new TypeError('alpha string required; received "'+typeof a+'"');c=a;d=c.match(/([A-Z]?[^A-Z]*)/g).shift();return this};this.g=function(b){if(!angular.isString(b))throw new TypeError('string required; received "'+typeof b+'"');a=b;return this}}
function t(a){return{restrict:'AC',replace:!0,require:[a.c(),'ngModel'],scope:{emptyOption:'@',format:'@',first:'@',last:'@'},controller:a.k(),link:l(a.link,a),template:'<select data-ng-options="element.label for element in element.opts track by element.label" data-ng-model="element.model" ><option value="" data-ng-disabled="true" data-ng-hide="!emptyOption">{{emptyOption}}</option></select>'}}
r.prototype.link=function(a,c,d,b){if(2===b.length){var e=b[0],g=b[1];c=this.c();var z=this.l(),f=function(b){g.$selection=b;a.$emit(g.$name+'.selection',b)};b=function(a){var b=e.m(a);g.$setValidity(z,b);if(b)return f(a),a;f(null);return!1};e.n();d.$observe(c,function(b){b=e.f('value',b);1===b.length&&(a.element.model=b[0])});d.$observe('value',function(b){b=e.f('label',b);1===b.length&&angular.isUndefined(a.element.model)&&(a.element.model=b[0])});g.$parsers.unshift(b);g.$formatters.unshift(b)}};
r.prototype.link.$inject=['$scope','$element','$attrs','controllers'];function u(a,c,d,b){q.call(this,a,0,0,b);c=1==b('filter')(n,a.format,!0).length;a.format=c?a.format:p;a.first=0;a.last=11;this.i=function(c){return b('date')((new Date).setMonth(c),a.format)}}m(u,q);u.$inject=['$scope','$element','$attrs','$filter'];u.prototype.b=function(a){return(a+1).toString()};u.prototype.a=function(a){return this.i(a)};function v(){r.call(this)}m(v,r);var w=['yyyy','yy','y'],x=w[0],y=(new Date).getFullYear(),A=y+10;function B(a,c,d,b){q.call(this,a,0,0,b);c=1==b('filter')(w,a.format,!0).length;a.format=c?a.format:x;a.first=/^\d{4}$/.test(a.first)?+a.first:y;a.last=/^\d{4}$/.test(a.last)?+a.last:A;a.first>a.last&&(a.first^=a.last,a.last^=a.first,a.first^=a.last);this.j=function(c){return b('date')(new Date(c.toString()),a.format)}}m(B,q);B.$inject=['$scope','$element','$attrs','$filter'];B.prototype.b=function(a){return a.toString()};B.prototype.a=function(a){return this.j(a)};function C(){r.call(this)}m(C,r);angular.module('leodido.dateElements',[]).controller('MonthSelectController',u).directive('monthSelect',function(){return t((new v).h('monthSelect').g('MonthSelectController'))}).controller('YearSelectController',B).directive('yearSelect',function(){return t((new C).h('yearSelect').g('YearSelectController'))});})();
