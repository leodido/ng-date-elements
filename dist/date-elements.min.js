/**
 * Copyright (c) 2015, Leo Di Donato <leodidonato@gmail.com>
 * ng-date-elements.js - AngularJS directives for date elements
 * @version v0.0.9
 * @link http://github.com/leodido/ng-date-elements
 * @license MIT
 */
(function(){function h(a,c,d){return a.call.apply(a.bind,arguments)}function k(a,c,d){if(!a)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,b);return a.apply(c,e)}}return function(){return a.apply(c,arguments)}}function l(a,c,d){l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf('native code')?h:k;return l.apply(null,arguments)}
function m(a,c){function d(){}d.prototype=c.prototype;a.o=c.prototype;a.prototype=new d;a.prototype.constructor=a;a.n=function(a,e,g){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return c.prototype[e].apply(a,d)}};function n(a,c,d,b){var e=this;this.m=function(){a.element=a.element||{};a.element.opts=[];for(var b=e.a('first'),c=e.a('last');b<=c;b++)a.element.opts.push({index:b,label:e.b(b),value:e.c(b)})};this.l=function(a){return a&&a.index>=this.a('first')&&a.index<=this.a('last')&&a.value===this.c(a.index)&&a.label===this.b(a.index)};this.e=function(c,e){var d={};d[c]=e;return b('filter')(a.element.opts,d,!0)};this.a=function(b){return a[b]}}n.$inject=['$scope','$element','$attrs','$filter'];function p(){var a=null,c=null,d=null;this.d=function(){return c};this.k=function(){return d};this.j=function(){return a};this.g=function(a){if(/[^a-zA-Z]/.test(a))throw new TypeError('alpha string required; received "'+typeof a+'"');c=a;d=c.match(/([A-Z]?[^A-Z]*)/g).shift();return this};this.f=function(b){if(!angular.isString(b))throw new TypeError('string required; received "'+typeof b+'"');a=b;return this}}
function q(a){return{restrict:'AC',replace:!0,require:[a.d(),'ngModel'],scope:{emptyOption:'@',format:'@',first:'@',last:'@'},controller:a.j(),link:l(a.link,a),template:'<select data-ng-options="element.label for element in element.opts track by element.label" data-ng-model="element.model" ><option value="" data-ng-disabled="true" data-ng-hide="!emptyOption">{{emptyOption}}</option></select>'}}
p.prototype.link=function(a,c,d,b){if(2===b.length){var e=b[0],g=b[1];c=this.d();var z=this.k(),f=function(b){g.$selection=b;a.$emit(g.$name+'.selection',b)};b=function(a){var b=e.l(a);g.$setValidity(z,b);if(b)return f(a),a;f(null);return!1};e.m();d.$observe(c,function(b){b=e.e('value',b);1===b.length&&(a.element.model=b[0])});d.$observe('value',function(b){b=e.e('label',b);1===b.length&&angular.isUndefined(a.element.model)&&(a.element.model=b[0])});g.$parsers.unshift(b);g.$formatters.unshift(b)}};
p.prototype.link.$inject=['$scope','$element','$attrs','controllers'];var r=['MMMM','MMM','MM','M'],t=r[2];function u(a,c,d,b){n.call(this,a,0,0,b);c=1==b('filter')(r,a.format,!0).length;a.format=c?a.format:t;a.first=0;a.last=11;this.h=function(c){return b('date')((new Date).setMonth(c),a.format)}}m(u,n);u.$inject=['$scope','$element','$attrs','$filter'];u.prototype.c=function(a){return(a+1).toString()};u.prototype.b=function(a){return this.h(a)};function v(){p.call(this)}m(v,p);var w=['yyyy','yy','y'],x=w[0],y=(new Date).getFullYear(),A=y+10;function B(a,c,d,b){n.call(this,a,0,0,b);c=1==b('filter')(w,a.format,!0).length;a.format=c?a.format:x;a.first=/^\d{4}$/.test(a.first)?+a.first:y;a.last=/^\d{4}$/.test(a.last)?+a.last:A;a.first>a.last&&(a.first^=a.last,a.last^=a.first,a.first^=a.last);this.i=function(c){return b('date')(new Date(c.toString()),a.format)}}m(B,n);B.$inject=['$scope','$element','$attrs','$filter'];B.prototype.c=function(a){return a.toString()};B.prototype.b=function(a){return this.i(a)};function C(){p.call(this)}m(C,p);angular.module('leodido.dateElements',[]).controller('MonthSelectController',u).directive('monthSelect',function(){return q((new v).g('monthSelect').f('MonthSelectController'))}).controller('YearSelectController',B).directive('yearSelect',function(){return q((new C).g('yearSelect').f('YearSelectController'))});})();
